{"architecture":"amd64","config":{"User":"dd","ExposedPorts":{"8080/tcp":{}},"Env":["PATH=/usr/local/nvidia/bin:/usr/local/cuda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin","CUDA_VERSION=11.1.1","LD_LIBRARY_PATH=/usr/local/nvidia/lib:/usr/local/nvidia/lib64","NVIDIA_VISIBLE_DEVICES=all","NVIDIA_DRIVER_CAPABILITIES=compute,utility","NVIDIA_REQUIRE_CUDA=cuda\u003e=11.1 brand=tesla,driver\u003e=418,driver\u003c419 brand=tesla,driver\u003e=440,driver\u003c441 brand=tesla,driver\u003e=450,driver\u003c451","NCCL_VERSION=2.7.8","CUDNN_VERSION=8.0.5.39"],"Cmd":["/bin/sh","-c","/opt/deepdetect/start-dede.sh -host 0.0.0.0"],"Volumes":{"/data":{}},"WorkingDir":"/opt/deepdetect/build/main","Labels":{"com.nvidia.cudnn.version":"8.0.5.39","description":"DeepDetect deep learning server \u0026 API / gpu version","maintainer":"emmanuel.benazera@jolibrain.com"},"ArgsEscaped":true,"OnBuild":null},"created":"2021-09-06T19:29:34.748506236+02:00","history":[{"created":"2020-11-25T22:25:26.245907708Z","created_by":"/bin/sh -c #(nop) ADD file:4f15c4475fbafb3fe335e415e3ea1ac416c34af911fcdfe273c5759438aa8eb4 in / "},{"created":"2020-11-25T22:25:27.346756278Z","created_by":"/bin/sh -c set -xe \t\t\u0026\u0026 echo '#!/bin/sh' \u003e /usr/sbin/policy-rc.d \t\u0026\u0026 echo 'exit 101' \u003e\u003e /usr/sbin/policy-rc.d \t\u0026\u0026 chmod +x /usr/sbin/policy-rc.d \t\t\u0026\u0026 dpkg-divert --local --rename --add /sbin/initctl \t\u0026\u0026 cp -a /usr/sbin/policy-rc.d /sbin/initctl \t\u0026\u0026 sed -i 's/^exit.*/exit 0/' /sbin/initctl \t\t\u0026\u0026 echo 'force-unsafe-io' \u003e /etc/dpkg/dpkg.cfg.d/docker-apt-speedup \t\t\u0026\u0026 echo 'DPkg::Post-Invoke { \"rm -f /var/cache/apt/archives/*.deb /var/cache/apt/archives/partial/*.deb /var/cache/apt/*.bin || true\"; };' \u003e /etc/apt/apt.conf.d/docker-clean \t\u0026\u0026 echo 'APT::Update::Post-Invoke { \"rm -f /var/cache/apt/archives/*.deb /var/cache/apt/archives/partial/*.deb /var/cache/apt/*.bin || true\"; };' \u003e\u003e /etc/apt/apt.conf.d/docker-clean \t\u0026\u0026 echo 'Dir::Cache::pkgcache \"\"; Dir::Cache::srcpkgcache \"\";' \u003e\u003e /etc/apt/apt.conf.d/docker-clean \t\t\u0026\u0026 echo 'Acquire::Languages \"none\";' \u003e /etc/apt/apt.conf.d/docker-no-languages \t\t\u0026\u0026 echo 'Acquire::GzipIndexes \"true\"; Acquire::CompressionTypes::Order:: \"gz\";' \u003e /etc/apt/apt.conf.d/docker-gzip-indexes \t\t\u0026\u0026 echo 'Apt::AutoRemove::SuggestsImportant \"false\";' \u003e /etc/apt/apt.conf.d/docker-autoremove-suggests"},{"created":"2020-11-25T22:25:28.342445422Z","created_by":"/bin/sh -c [ -z \"$(apt-get indextargets)\" ]","empty_layer":true},{"created":"2020-11-25T22:25:29.343142847Z","created_by":"/bin/sh -c mkdir -p /run/systemd \u0026\u0026 echo 'docker' \u003e /run/systemd/container"},{"created":"2020-11-25T22:25:29.546718343Z","created_by":"/bin/sh -c #(nop)  CMD [\"/bin/bash\"]","empty_layer":true},{"created":"2020-12-14T23:52:39.251199124Z","created_by":"LABEL maintainer=NVIDIA CORPORATION \u003ccudatools@nvidia.com\u003e","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2020-12-14T23:52:39.251199124Z","created_by":"RUN /bin/sh -c apt-get update \u0026\u0026 apt-get install -y --no-install-recommends     gnupg2 curl ca-certificates \u0026\u0026     curl -fsSL https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/7fa2af80.pub | apt-key add - \u0026\u0026     echo \"deb https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64 /\" \u003e /etc/apt/sources.list.d/cuda.list \u0026\u0026     echo \"deb https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu2004/x86_64 /\" \u003e /etc/apt/sources.list.d/nvidia-ml.list \u0026\u0026     apt-get purge --autoremove -y curl     \u0026\u0026 rm -rf /var/lib/apt/lists/* # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2020-12-14T23:52:39.251199124Z","created_by":"ENV CUDA_VERSION=11.1.1","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2020-12-14T23:52:55.072182722Z","created_by":"RUN /bin/sh -c apt-get update \u0026\u0026 apt-get install -y --no-install-recommends     cuda-cudart-11-1=11.1.74-1     cuda-compat-11-1     \u0026\u0026 ln -s cuda-11.1 /usr/local/cuda \u0026\u0026     rm -rf /var/lib/apt/lists/* # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2020-12-14T23:52:59.486409932Z","created_by":"RUN /bin/sh -c echo \"/usr/local/nvidia/lib\" \u003e\u003e /etc/ld.so.conf.d/nvidia.conf \u0026\u0026     echo \"/usr/local/nvidia/lib64\" \u003e\u003e /etc/ld.so.conf.d/nvidia.conf # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2020-12-14T23:52:59.486409932Z","created_by":"ENV PATH=/usr/local/nvidia/bin:/usr/local/cuda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2020-12-14T23:52:59.486409932Z","created_by":"ENV LD_LIBRARY_PATH=/usr/local/nvidia/lib:/usr/local/nvidia/lib64","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2020-12-14T23:52:59.486409932Z","created_by":"ENV NVIDIA_VISIBLE_DEVICES=all","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2020-12-14T23:52:59.486409932Z","created_by":"ENV NVIDIA_DRIVER_CAPABILITIES=compute,utility","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2020-12-14T23:52:59.486409932Z","created_by":"ENV NVIDIA_REQUIRE_CUDA=cuda\u003e=11.1 brand=tesla,driver\u003e=418,driver\u003c419 brand=tesla,driver\u003e=440,driver\u003c441 brand=tesla,driver\u003e=450,driver\u003c451","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2020-12-14T23:55:00.461147826Z","created_by":"LABEL maintainer=NVIDIA CORPORATION \u003ccudatools@nvidia.com\u003e","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2020-12-14T23:55:00.461147826Z","created_by":"ENV NCCL_VERSION=2.7.8","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2020-12-14T23:55:00.461147826Z","created_by":"RUN /bin/sh -c apt-get update \u0026\u0026 apt-get install -y --no-install-recommends     cuda-libraries-11-1=11.1.1-1     libnpp-11-1=11.1.2.301-1     cuda-nvtx-11-1=11.1.74-1     libcublas-11-1=11.3.0.106-1     libnccl2=$NCCL_VERSION-1+cuda11.1     \u0026\u0026 apt-mark hold libnccl2     \u0026\u0026 rm -rf /var/lib/apt/lists/* # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2020-12-15T00:05:02.546348912Z","created_by":"LABEL maintainer=NVIDIA CORPORATION \u003ccudatools@nvidia.com\u003e","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2020-12-15T00:05:02.546348912Z","created_by":"ENV CUDNN_VERSION=8.0.5.39","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2020-12-15T00:05:02.546348912Z","created_by":"LABEL com.nvidia.cudnn.version=8.0.5.39","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2020-12-15T00:05:02.546348912Z","created_by":"RUN /bin/sh -c apt-get update \u0026\u0026 apt-get install -y --no-install-recommends     libcudnn8=$CUDNN_VERSION-1+cuda11.1     \u0026\u0026 apt-mark hold libcudnn8 \u0026\u0026     rm -rf /var/lib/apt/lists/* # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-05-10T11:58:56.764196168+02:00","created_by":"ARG DEEPDETECT_ARCH=gpu","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2021-05-10T11:58:56.764196168+02:00","created_by":"LABEL description=DeepDetect deep learning server \u0026 API / gpu version","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2021-05-10T11:58:56.764196168+02:00","created_by":"LABEL maintainer=emmanuel.benazera@jolibrain.com","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2021-05-10T11:58:56.764196168+02:00","created_by":"RUN |1 DEEPDETECT_ARCH=gpu /bin/sh -c export DEBIAN_FRONTEND=noninteractive \u0026\u0026     apt-get update -y \u0026\u0026 apt-get install -y     wget     curl \tlibopenblas-base \tliblmdb0 \tlibleveldb1d     libboost-regex1.71.0 \tlibgoogle-glog0v5     libopencv4.2 \tlibgflags2.2 \tlibcurl4 \tlibcurlpp0 \tlibhdf5-cpp-103     libboost-atomic1.71.0     libboost-chrono1.71.0     libboost-date-time1.71.0 \tlibboost-filesystem1.71.0 \tlibboost-thread1.71.0 \tlibboost-iostreams1.71.0     libboost-regex1.71.0     libboost-stacktrace1.71.0     libboost-system1.71.0 \tlibarchive13 \tlibtcmalloc-minimal4 # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-05-10T11:58:58.707466366+02:00","created_by":"RUN |1 DEEPDETECT_ARCH=gpu /bin/sh -c ln -sf /dev/stdout /var/log/deepdetect.log \u0026\u0026     ln -sf /dev/stderr /var/log/deepdetect.log # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-05-10T11:59:01.725063383+02:00","created_by":"RUN |1 DEEPDETECT_ARCH=gpu /bin/sh -c useradd -ms /bin/bash dd \u0026\u0026     chown -R dd:dd /opt # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-05-10T11:59:01.725063383+02:00","created_by":"USER dd","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2021-09-06T19:28:46.954540354+02:00","created_by":"COPY /opt/deepdetect/build/main /opt/deepdetect/build/main # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-09-06T19:28:48.696849168+02:00","created_by":"COPY /opt/deepdetect/build/oatpp-swagger/src/oatpp-swagger/res/ /opt/deepdetect/build/oatpp-swagger/src/oatpp-swagger/res/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-09-06T19:28:50.33403447+02:00","created_by":"COPY /opt/deepdetect/datasets/imagenet/corresp_ilsvrc12.txt /opt/models/ggnet/corresp.txt # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-09-06T19:28:51.864660596+02:00","created_by":"COPY /opt/deepdetect/datasets/imagenet/corresp_ilsvrc12.txt /opt/models/resnet_50/corresp.txt # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-09-06T19:28:53.459932585+02:00","created_by":"COPY /opt/deepdetect/templates/caffe/googlenet/*prototxt /opt/models/ggnet/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-09-06T19:28:55.027519591+02:00","created_by":"COPY /opt/deepdetect/templates/caffe/resnet_50/*prototxt /opt/models/resnet_50/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-09-06T19:29:14.343461602+02:00","created_by":"COPY /tmp/lib/* /opt/deepdetect/build/lib/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-09-06T19:29:16.074746553+02:00","created_by":"COPY /opt/deepdetect/templates /opt/deepdetect/build/templates # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-09-06T19:29:17.47059956+02:00","created_by":"COPY /opt/deepdetect/get_models.sh /opt/deepdetect/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-09-06T19:29:18.900120924+02:00","created_by":"COPY /opt/deepdetect/docker/check-dede-deps.sh /opt/deepdetect/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-09-06T19:29:20.520663315+02:00","created_by":"COPY /opt/deepdetect/docker/start-dede.sh /opt/deepdetect/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-09-06T19:29:20.520663315+02:00","created_by":"WORKDIR /opt/models","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2021-09-06T19:29:20.520663315+02:00","created_by":"USER root","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2021-09-06T19:29:22.266519022+02:00","created_by":"RUN |1 DEEPDETECT_ARCH=gpu /bin/sh -c chown -R dd:dd /opt/models # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-09-06T19:29:22.266519022+02:00","created_by":"USER dd","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2021-09-06T19:29:31.416789131+02:00","created_by":"RUN |1 DEEPDETECT_ARCH=gpu /bin/sh -c /opt/deepdetect/get_models.sh # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-09-06T19:29:34.748506236+02:00","created_by":"RUN |1 DEEPDETECT_ARCH=gpu /bin/sh -c /opt/deepdetect/check-dede-deps.sh # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2021-09-06T19:29:34.748506236+02:00","created_by":"WORKDIR /opt/deepdetect/build/main","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2021-09-06T19:29:34.748506236+02:00","created_by":"CMD [\"/bin/sh\" \"-c\" \"/opt/deepdetect/start-dede.sh -host 0.0.0.0\"]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2021-09-06T19:29:34.748506236+02:00","created_by":"VOLUME [/data]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2021-09-06T19:29:34.748506236+02:00","created_by":"EXPOSE map[8080/tcp:{}]","comment":"buildkit.dockerfile.v0","empty_layer":true}],"os":"linux","rootfs":{"type":"layers","diff_ids":["sha256:bacd3af13903e13a43fe87b6944acd1ff21024132aad6e74b4452d984fb1a99a","sha256:9069f84dbbe96d4c50a656a05bbe6b6892722b0d1116a8f7fd9d274f4e991bf6","sha256:f6253634dc78da2f2e3bee9c8063593f880dc35d701307f30f65553e0f50c18c","sha256:c1bf6d127f704515535303c13d2ce8397f233d7f9230ea69ffd8d39e339b5568","sha256:48caf57439375ac4719aa6a6368665dc159fb3fc98829ab39f714619ad49bb61","sha256:d3f59fa7cf6489886fa86f33f78e8ed6ed2c77ff55e2f60eb676bf0af870330b","sha256:b56412b04eb8cb2cd6c24b7fd2dcee5e6eb86c81744adf0591fc1c3c47b7bb76","sha256:312a60678511abc07a1b426afa961077af6d31910a7020ee2435040abff82660","sha256:1ffd36267151a2ee31b7640a7e36c432167ff824127a8ff84ed98079607aa731","sha256:457dc949c55a53030a1e3bf58a67417cf310ef50ce797985705a40fba1b48241","sha256:e1fbbadf1cb6f52f631e1c385fee8b33361829721f1d05ddf311956b76f8c012","sha256:df8f54d42f27e14e5daa59c64301c45772ae0b05148a88b7cd0e2060b7785e52","sha256:a7addfd5f7499136e589d68a4eb4a9f4833d926167b84d5f8e06274de5c14f48","sha256:472db6cdf40064a9dbba5a9edf7bb0b35cb66d284caf7003ad173c8f74fc95d6","sha256:a6b09e2205678a403fb4c3892f1f84a4259f02c8db830fdf889ad2c8f8327d83","sha256:faa349d81e1188abaf053c83630076fb9a36bae3ef91f534a37a0f35c89523fd","sha256:cb3029d0c6e251bfe3c6b89b506add38d775e961b3b3525f74da4bdc9b146469","sha256:077cc440d64fe9a2abd0ba1e34d2cfda3421af36224b7935af62f62933dbffe2","sha256:4b1a3bc1aa37d46307d609f8f16aa3f5dca9c0808839d4373af3469b77eda8a0","sha256:b5de4fe9876aaed3f5a2f31b1a1d47b68f96931262d29a2d772bd90b344d3934","sha256:d040904bbaa2e13b59909327935f14d2ee877a1d9e9f0cbce682c530fec259cd","sha256:fc962515428bdc7fd5dc184e41a2cfefac8ba900efa25bf627542f29026ca3da","sha256:d03edb14e79067241615ffd86d7d11f2f7a0d379ef8ad8d4198919aa48ac2c4b","sha256:a418b76d68e785f82f5fe06e14a9e618ce42e2d85c22746206ca9d6ba904f8ca","sha256:5f70bf18a086007016e948b04aed3b82103a36bea41755b6cddfaf10ace3c6ef"]}}